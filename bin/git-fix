#!/bin/bash
#
# Quick commit for small fixes with a conventional commit message.
# Stages all changes and opens editor with pre-filled "fix:" message.
#
# $1 - Description of the fix
#
# Examples
#
#   git fix "typo in README"
#   git fix "null pointer exception"

set -euo pipefail

if [[ "${1:-}" == "--help" ]] || [[ "${1:-}" == "-h" ]]; then
    echo "Usage: git fix <description>"
    echo ""
    echo "Quick commit for small fixes with a conventional commit message."
    echo "Stages all changes (-a) and opens your editor with a pre-filled"
    echo "'fix: <description>' commit message."
    echo ""
    echo "Arguments:"
    echo "  description   Short description of the fix"
    echo ""
    echo "Examples:"
    echo "  git fix \"typo in README\""
    echo "  git fix \"null pointer exception\""
    exit 0
fi

git commit -a -t <(echo "fix: $1")
